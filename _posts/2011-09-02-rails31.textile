---
layout: post
title: Ruby on Rails 3.1 正式版发布
---
Rails3.1在2011年8月31日正式发布. Rails3.1要求使用ruby1.8.7或更高版本. 详细安装过程请阅读 "Read This Before Installing Rails 3.1":http://railsapps.github.com/installing-rails-3-1.html .  Rails3.1包含了多个新特性, 并进行了大量改进.

h2. Assets Pipeline

这是此次版本的最大变化. 使用Asserts Pipeline可以使CSS和JavaScript代码管理更加规范及方便. 这项功能使用 "Sprockets":https://github.com/sstephenson/sprockets 完成的, 详细请看 "Asset Pipeline guide":http://guides.rubyonrails.org/asset_pipeline.html .

h2. jQuery成为默认的javascript库

jQuery替代prototype成为默认的javascript库

h2. Streaming response support

Rails开始支持HTTP Streaming. 使用这项技术, 可以让浏览器在页面作出响应的同时下载样式表和JavaScript文件. "How Rails 3.1 will speed up your application with Automatic Flushing":http://hemju.com/2010/09/08/how-rails-3-1-will-speed-up-your-application-with-automatic-flushing/

h2. 移除RJS

RJS被提取成一个gem.

h2. Identity Map

当ActiveRecord开启了Identity Map后, 每一个model会维持一个Map, 每次实例化对象之前会通过主键去这个model对应的Map里找到对应的对象. 如果存在, 直接从Map里返回这个对象, 否则才进行查询, 实例化对象后放到Map里. Identity Map在默认情况下是关闭的. 详细 "Identity Map in Rails3.1":http://www.iteye.com/topic/1081767

h2. JSON成为ActiveResource的默认格式

如果要使用xml格式, 需要在对应的class中设置 <code>self.format = :xml</code>

h2. SecurePassword

使用 "bcrypt-ruby":http://bcrypt-ruby.rubyforge.org/ 对密码进行加密. "文档":http://rdoc.info/github/lifo/docrails/master/ActiveModel/SecurePassword/ClassMethods , "ActiveModel::SecurePassword":http://bcardarella.com/post/4668842452/exploring-rails-3-1-activemodel-securepassword

h2. 更多

更多详细更改介绍, 请参阅官方文档 "Rails 3.1 Release Notes":http://guides.rubyonrails.org/3_1_release_notes.html

* "Rails 3.1 Overview":http://railscasts.com/episodes/265-rails-3-1-overview
* "Rails 3.1 Awesomeness":http://www.slideshare.net/dynamicclarity/rails-31-awesomeness-whats-new
* "Changelog between 3.0 and 3.1":https://gist.github.com/958283
* "Helpful Resources For Upgrading to Rails 3.1":http://jasonrudolph.com/blog/2011/06/06/helpful-resources-for-upgrading-to-rails-3-1/
* "Authentication in Rails 3.1":http://railscasts.com/episodes/270-authentication-in-rails-3-1
