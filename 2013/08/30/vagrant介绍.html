<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="utf-8">
    <title>vagrant介绍</title>
  
    <meta name="author" content="Rojazz1999">
    <link type="application/rss+xml" rel="alternate" title="CODE4FUN posts" href="/rss.xml">
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link href="/assets/simple/stylesheets/style.css" type="text/css" rel="stylesheet" media="all">
<link href="/assets/simple/widgets/google_prettify/stylesheets/twitter-bootstrap.css" type="text/css" rel="stylesheet" media="all">


  <!-- Update these with your own images
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
  -->
  </head>

  <body>
    <header class="header">
      CODE4FUN
    </header>
    <nav>
      
        


  <a href="/">首页</a>


      
        


  <a href="/archive">文章</a>


      
    </nav>
    <article class="main">
        <header class="title">
vagrant介绍
</header>
<article class="content">
<h1><a style="display: block;" name="vagrant介绍" href="#vagrant介绍"></a>vagrant介绍</h1>

<p>Vagrant是一个使用ruby编写基于VirtualBox的, 用于创建和配置轻量级的 可重用的 便携的虚拟化开发环境的工具.</p>

<p>可以满足以下需求:</p>

<ul>
<li>创建隔离依赖的开发环境</li>
<li>创建可重用的干净的测试环境</li>
<li>创建可重用的工作流程</li>
</ul>

<h2><a style="display: block;" name="安装" href="#安装"></a>安装</h2>

<ol>
<li>安装Ruby, VirtualBox</li>
<li>下载安装<a href="http://downloads.vagrantup.com/">Vagrant</a></li>
</ol>

<h2><a style="display: block;" name="配置" href="#配置"></a>配置</h2>

<p>Vagrant默认文件会保存在用户目录下. 如过要改动, 可以移动<code>~/.vagrant.d</code>到你想要位置. 并且设置环境变量<code>VAGRANT_HOME</code>指向新路径.<br />
同时可以修改Vagrant创建的虚拟机的保存位置. 打开VirtualBox程序, 点击<code>管理/全局设定</code>菜单项, 将<code>常规</code>栏里的<code>默认虚拟电脑位置(M)</code>改为其他路径.</p>

<h2><a style="display: block;" name="使用" href="#使用"></a>使用</h2>

<h3>Box</h3>

<p>box就相当于是一个环境，它一般是一个VirtualBox虚拟机的镜像，官方提供了一个基于Ubuntu 10.04的box。 给vagrant添加一个box:</p>

<pre><code>vagrant box add lucid32 http://files.vagrantup.com/lucid32.box
</code></pre>

<p>其中lucid32表示给这个box起名lucid32。</p>

<p>也可以把lucid32.box下载过来，然后直接执行</p>

<pre><code>vagrant box add lucid32 lucid32.box
</code></pre>

<p><a href="http://www.vagrantbox.es/">这个网站</a>收集了很多用户自己创建的box, 可以根据需要选择下载.</p>

<h3>创建虚拟机</h3>

<p>执行</p>

<pre><code>vagrant init lucid32
</code></pre>

<p>表示基于lucid32创建一个虚拟环境, 命令执行后会在当前目录下生成一个Vagrantfile文件. 这个就是当前虚拟环境的配置文件.</p>

<p>再执行</p>

<pre><code>vagrant up
</code></pre>

<p>就可以启动虚拟机了.  默认启动后是没有界面的.</p>

<p>执行</p>

<pre><code>vagrant ssh
</code></pre>

<p>就可以ssh到虚拟机了.</p>

<p>Vagrantfile有几项比较重要的配置:</p>

<ul>
<li>config.vm.box 虚拟机使用的Box</li>
<li>config.vm.network 配置虚拟机网络连接方式</li>
<li>config.vm.forward_port 配置虚拟机端口转发</li>
<li>config.vm.share_folder 配置文件夹共享目录</li>
</ul>

<h3>打包Box</h3>

<p>对虚拟机做过一些配置后, 可以对虚拟机的当前状态进行打包, 已供其他人使用.</p>

<p>执行<code>vagrant package</code>即可在当前目录生成一个package.box文件.</p>

<h3>其它命令</h3>

<ul>
<li>vagrant halt 关闭虚拟机</li>
<li>vagrant suspend 休眠虚拟机</li>
<li>vagrant reload 重启虚拟机</li>
<li>vagrant status 查看当前虚拟机状态</li>
<li>更多其他命令可以通过vagrant help查看。</li>
</ul>

<h2><a style="display: block;" name="参考" href="#参考"></a>参考</h2>

<ul>
<li><a href="http://docs.vagrantup.com/v2/">Vagrant docs</a></li>
<li><a href="http://wushaobo.info/?p=83">Vagrant 知识澄清与杂症诊治</a></li>
</ul>

</article>
    </article>
    <footer>
      Copyright &copy; 2014 Rojazz1999 &#8226; <a href='https://plus.google.com/u/0/101202661005324839860?rel=author' rel='me'>Google+</a> &#8226; Hosted by <a href='http://github.com/prisoner/prisoner.github.com/' target='_blank'>GitHub</a> &#8226; powered by <a href='https://github.com/wendal/gor'>gor</a>
    </footer>
    
<script src="http://cdn.bootcss.com/prettify/r298/prettify.min.js"></script>
<script>
  var pres = document.getElementsByTagName("pre");
  for (var i=0; i < pres.length; ++i) {
    pres[i].className = "prettyprint linenums";
  }
  prettyPrint();
</script>

  </body>
</html>
